// This is a manifest for the angular application that we will call angularApp
//
//= require jquery
//= require jquery_ujs
//= require turbolinks
//= require angular
//= require angular-resource
//= require angular-route
//= require angular-rails-templates
//= require_tree ../templates
//= require_tree ./angular_controllers
//= require datetimepicker

// START ANGULAR
// This is the instantiation of the Angular app, and we pass the modules we are using
// we are using ngResource for REST resources
// ngRoute to set the routes (URL to controller and template mapping)
// templates is a js library that allows us to use HAML in our templates
// and use the asset pipeline in rails (compression, compiling)
var angularApp = angular.module('angularApp', ['ngResource', 'ngRoute', 'templates']);


// ROUTE CONFIGURATION
// Map the URL to a specific controller action and a template
// We map one controller action and provide a template Url to display
// By calling a specific 'action' function, one is able to set some state
// prior to showing the template
// 
// The templates are displayed in the ng-view html element
// There appears to be only one of these at a time
angularApp.config(function ($routeProvider, $httpProvider) {

  $httpProvider.defaults.headers.common['X-CSRF-Token'] = $('meta[name=csrf-token]').attr('content');

  $routeProvider.when('/events_list', {
    controller: 'eventsController.action.indexAction', templateUrl: 'events_list.html'
  });

  $routeProvider.when('/events_new', {
    controller: 'eventsController.action.newAction', templateUrl: 'events_new.html'
  });

});
